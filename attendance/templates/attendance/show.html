{% extends "base.html" %}

{% load mathfilters %}

{% block title %}Events{% endblock %}

{% block content %}
<div class="row success-message" style="display: none;">
    <div class="alert alert-success">
        <button type="button" class="close" data-hide="alert" aria-hidden="true">&times;</button>
        <strong>Success!</strong> List updated.
    </div> 
</div>
<div class="row mt">
    <div class="col-md-12">
        <div class="content-panel">
            <table class="table table-striped table-advance table-hover">
                <div class="col-md-6">
                    <h4><strong>Event:</strong> {{event.name}} </h4>
                    <h4><strong>Date:</strong> {{event.date}} </h4>
                </div>
                <div class="col-md-6">
                    <button type="button" class="btn btn-theme pull-right" data-id="{{ event.id }}" onclick="submitAttendance(this);">Submit List</button>
                </div>
                <div class="col-md-12">
                    <hr>
                    <thead>
                        <tr>
                            <th>#</th>
                            <th><i class="fa fa-user"></i> Name</th>
                            <th><i class="fa fa-credit-card"></i> Matric Number</th>
                            <th><i class=" fa fa-calendar"></i> Year</th>
                            <th><i class=" fa fa-edit"></i> Status</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for user in user_list %}
                        <tr>
                            <td>{{ forloop.counter }}</td>
                            <td>{{ user.name }}</a></td>
                            <td>{{ user.matric_number }}</td>
                            <td>{{ this_year|sub:user.batch_year|add:1 }}</td>
                            <td>
                                <span class="btn btn-success btn-xs attendance-btn-present-{{ user.id }} {% if user.status != "present" %} attendance-btn-inactive {% endif %}" data-id="{{ user.id }}" data-type="present" onclick="attendanceBtn(this);">Present</span>
                                <span class="btn btn-warning btn-xs attendance-btn-absent-{{ user.id }} {% if user.status != "absent" %} attendance-btn-inactive {% endif %}" data-id="{{ user.id }}" data-type="absent" onclick="attendanceBtn(this);">Absent</span>
                                <span class="btn btn-info btn-xs attendance-btn-excused-{{ user.id }} {% if user.status != "excused" %} attendance-btn-inactive {% endif %}" data-type="excused" data-id="{{ user.id }}" onclick="attendanceBtn(this);">Excused</span>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </div>
            </table>
        </div><!-- /content-panel -->
    </div><!-- /col-md-12 -->
</div><!-- /row -->
{% endblock %}